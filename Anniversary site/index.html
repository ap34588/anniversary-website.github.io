<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>3 Months of Us ‚ù§Ô∏è</title>
  <meta name="description" content="A tiny, offline-friendly website gift that celebrates our last 3 months together." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #0f0f14;
      --card: #14141c;
      --muted: #9aa1aa;
      --text: #f2f5f9;
      --accent: #ff6b9a;
      --accent-2: #5ee0ff;
      --ring: rgba(255,107,154,.35);
    }
    * { box-sizing: border-box }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
      color: var(--text);
      background: radial-gradient(1200px 800px at 80% -10%, #1a1a27 0%, #0f0f14 60%),
                  radial-gradient(1000px 700px at 10% 110%, #15151f 0%, #0f0f14 60%),
                  var(--bg);
      overflow-x: hidden;
    }
    a { color: var(--accent) }

    /* Header / Hero */
    header.hero {
      position: relative;
      padding: 64px 20px 28px;
      text-align: center;
      overflow: hidden;
      isolation: isolate;
    }
    .heart-bg {
      position: absolute; inset: -10% -10% auto -10%; height: 50vh; pointer-events: none; opacity: .35;
      background: radial-gradient(circle at 30% 40%, rgba(255,107,154,.25), transparent 40%),
                  radial-gradient(circle at 70% 60%, rgba(94,224,255,.2), transparent 40%);
      filter: blur(30px);
      z-index: -1;
    }
    .title {
      font-size: clamp(28px, 6vw, 56px);
      font-weight: 800;
      letter-spacing: .5px;
      line-height: 1.05;
      margin: 0 0 8px;
    }
    .subtitle { color: var(--muted); margin: 0 auto 18px; max-width: 820px; font-weight: 400 }
    .chips { display: inline-flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
    .chip {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 10px 14px; border-radius: 999px; background: #171723; border: 1px solid #26263b;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.02), 0 8px 30px rgba(0,0,0,.25);
      font-size: 14px; color: #e8eaf1;
    }
    .chip .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 8px var(--accent) }
    .muted { color: var(--muted); } /* added for months badge */

    /* Controls */
    .controls { display: flex; gap: 12px; justify-content: center; margin: 22px 0 8px; flex-wrap: wrap }
    .btn {
      appearance: none; border: 1px solid #2a2a3f; background: linear-gradient(#1a1a28, #161624);
      color: var(--text); padding: 10px 14px; border-radius: 12px; cursor: pointer; font-weight: 600; letter-spacing: .2px;
      transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
      box-shadow: 0 8px 18px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.04);
    }
    .btn:hover { transform: translateY(-1px); border-color: #3d3d59; }
    .btn.primary { background: linear-gradient(180deg, #ff6b9a, #ff317a); border: none; box-shadow: 0 10px 20px rgba(255,49,122,.35); }
    .btn.primary:active { transform: translateY(0) scale(.99) }

    /* Timeline nav */
    nav.timeline { position: sticky; top: 0; z-index: 5; backdrop-filter: blur(8px); background: rgba(15,15,20,.5); border-bottom: 1px solid rgba(255,255,255,.06); }
    .timeline-inner { display: grid; grid-auto-flow: column; grid-auto-columns: max-content; gap: 8px; overflow-x: auto; padding: 10px; justify-content: center }
    .pill { padding: 8px 12px; border-radius: 999px; border: 1px solid #2a2a3f; color: #dfe3ee; background: #151523; cursor: pointer; white-space: nowrap; font-size: 14px }
    .pill.active { background: #1d1d2c; border-color: #3b3b59; box-shadow: 0 0 0 3px var(--ring) }

    /* Sections */
    section { padding: 28px 18px 34px; max-width: 1100px; margin: 0 auto }
    .section-head { display: flex; align-items: end; justify-content: space-between; gap: 10px; margin-bottom: 12px }
    .section-head h2 { margin: 0; font-weight: 700; font-size: clamp(18px, 3vw, 28px) }
    .section-head .count { color: var(--muted); font-size: 14px }

    /* Gallery */
    .grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 10px }
    .card {
      border-radius: 16px; overflow: hidden; position: relative; background: #0d0d14;
      border: 1px solid #202035; aspect-ratio: 4/5; cursor: pointer; isolation: isolate;
      box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.03);
    }
    .card img { width: 100%; height: 100%; object-fit: cover; display: block; filter: saturate(1.05) contrast(1.02) }
    .card:hover::after { content:""; position: absolute; inset:0; background: radial-gradient(600px 200px at 50% 0%, rgba(255,255,255,.08), transparent 60%); }
    .card small { position: absolute; left: 8px; bottom: 8px; background: rgba(0,0,0,.45); padding: 4px 8px; border-radius: 999px; font-size: 12px; backdrop-filter: blur(4px) }

    .span-3 { grid-column: span 3 }
    .span-4 { grid-column: span 4 }
    .span-6 { grid-column: span 6 }
    .span-8 { grid-column: span 8 }
    @media (max-width: 900px) {
      .span-8 { grid-column: span 6 }
    }
    @media (max-width: 700px) {
      .grid { grid-template-columns: repeat(6, 1fr) }
      .span-6, .span-8 { grid-column: span 6 }
      .span-4 { grid-column: span 3 }
      .span-3 { grid-column: span 3 }
    }

    /* Modal */
    .lightbox { position: fixed; inset: 0; display: none; place-items: center; background: rgba(7,7,12,.8); z-index: 40 }
    .lightbox.open { display: grid; }
    .lb-inner { width: min(92vw, 1100px); max-height: 88vh; background: #0c0c13; border: 1px solid #2a2a3f; border-radius: 16px; overflow: clip; box-shadow: 0 20px 70px rgba(0,0,0,.6) }
    .lb-media { position: relative; background: #000; aspect-ratio: 16/9; display: grid; place-items: center }
    .lb-media img { width: 100%; height: 100%; object-fit: contain }
    .lb-bar { display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 10px 12px; border-top: 1px solid #23233a; background: #12121b }
    .lb-caption { color: #dfe3ee; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis }
    .lb-ctr { display: flex; gap: 8px }

    .icon-btn { width: 36px; height: 36px; border-radius: 10px; display: grid; place-items: center; border: 1px solid #2a2a3f; background: #171724; cursor: pointer }
    .icon-btn:hover { border-color: #3d3d59 }

    /* Footer */
    footer { padding: 36px 20px 64px; text-align: center; color: var(--muted) }

    /* Confetti (very light) */
    canvas#confetti { position: fixed; inset: 0; pointer-events: none; z-index: 50 }

    /* Audio toggle */
    .audio-toggle { position: fixed; right: 14px; bottom: 14px; z-index: 60 }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>

  <header class="hero">
    <div class="heart-bg"></div>
    <h1 class="title">3 Months of Us <span aria-hidden>‚ù§Ô∏è</span></h1>
    <p class="subtitle">A little website I made to celebrate our favorite memories from the past 3 months. Click any photo to open a full-screen view, press ‚ñ∂Ô∏é to autoplay, or shuffle for surprises.</p>
    <div class="chips" id="stats">
      <div class="chip"><span class="dot" aria-hidden></span><span id="dayCount">0</span> days together <span id="monthsBadge" class="muted"></span></div>
      <div class="chip">Started: <strong id="startDateLabel"></strong></div>
      <div class="chip">Through: <strong id="endDateLabel"></strong></div>
    </div>
    <div class="controls" role="group" aria-label="Controls">
      <button class="btn primary" id="playAll">‚ñ∂Ô∏é Play slideshow</button>
      <button class="btn" id="shuffle">Shuffle memories</button>
      <button class="btn" id="scrollToGallery">Jump to photos ‚Üì</button>
    </div>
  </header>

  <nav class="timeline" aria-label="Timeline navigation">
    <div class="timeline-inner" id="timeline"></div>
  </nav>

  <main id="content"></main>

  <section aria-label="Love note" style="text-align:center">
    <p class="subtitle" style="max-width:800px;margin:10px auto 0">No matter the place or the season, it‚Äôs better with you. Thank you for these past three months ‚Äî and the millions after. ‚ôæÔ∏è</p>
  </section>

  <footer>
    <small>Built with love. Works fully offline ‚Äî just open <code>index.html</code>.</small>
  </footer>

  <!-- Optional background music (place a file at assets/music.mp3) -->
  <audio id="bgm" preload="auto" loop src="assets/music.mp3"></audio>
  <div class="audio-toggle">
    <button class="btn" id="musicBtn">‚ô™ Music: Off</button>
  </div>

  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
    <div class="lb-inner">
      <div class="lb-media"><img id="lbImg" alt="Memory" /></div>
      <div class="lb-bar">
        <div class="lb-caption" id="lbCaption">&nbsp;</div>
        <div class="lb-ctr">
          <button class="icon-btn" id="prev" title="Previous" aria-label="Previous">‚óÄÔ∏é</button>
          <button class="icon-btn" id="togglePlay" title="Play/Pause" aria-label="Play/Pause">‚ñ∂Ô∏é</button>
          <button class="icon-btn" id="next" title="Next" aria-label="Next">‚ñ∂Ô∏é</button>
          <button class="icon-btn" id="close" title="Close" aria-label="Close">‚úï</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    /**
     * üëâ HOW TO USE
     * 1) Put your images into /images/month1, /images/month2, /images/month3 (create these folders).
     * 2) Update the arrays below with the filenames and (optional) captions.
     * 3) Set your real anniversary start date in ANNIVERSARY_START.
     * 4) (Optional) Drop an MP3 at assets/music.mp3 for background music.
     * 5) Open index.html ‚Äî it works offline.
     */

    const ANNIVERSARY_START = new Date('2025-05-28'); // ‚Üê your current start date

    /* ---------- Pretty date formatting + ordinal suffix ---------- */
    function formatPrettyDate(date) {
      const opts = { year: "numeric", month: "long", day: "numeric" };
      // e.g., "May 27, 2025"
      let base = date.toLocaleDateString(undefined, opts);
      const d = date.getDate();
      const suffix =
        (d % 10 === 1 && d !== 11) ? "st" :
        (d % 10 === 2 && d !== 12) ? "nd" :
        (d % 10 === 3 && d !== 13) ? "rd" : "th";
      return base.replace(/\d+/, d + suffix);
    }

    /* ---------- Months badge helper (appears after ~90 days) ---------- */
    function maybeShowMonthsBadge(totalDays) {
      const badge = document.getElementById('monthsBadge');
      const thresholdDays = 90; // show after ~3 months
      if (totalDays >= thresholdDays) {
        const approxMonths = Math.round(totalDays / 30.44); // average month length
        badge.textContent = `(${approxMonths} month${approxMonths > 1 ? 's' : ''})`;
      } else {
        badge.textContent = ''; // hide if under threshold
      }
    }

    // --- Configuration: add your images here ---
    const months = [
      {
        label: 'Month 1',
        range: 'May ‚Üí June 2025',
        images: [
            { src: 'images/month1/IMG_1819.jpeg', caption: 'Brunch Date ‚òïÔ∏è' },
            { src: 'images/month1/IMG_1838.jpeg', caption: 'Late Night Cuddles' },
            { src: 'images/month1/IMG_3102.JPG', caption: 'Getting ready together' },
            { src: 'images/month1/IMG_3120.JPG', caption: 'Backseat Fun' },
            { src: 'images/month1/IMG_3870.jpeg', caption: 'UGA Campus Tour' },
            { src: 'images/month1/IMG_4028.jpeg', caption: 'Aquarium Date' },
            { src: 'images/month1/IMG_3912.jpeg', caption: 'Piggyback Ride' }, 
            { src: 'images/month1/IMG_3910.jpeg', caption: 'Pose' },
            { src: 'images/month1/IMG_3870.jpeg', caption: 'Sanford Stadium' },
            { src: 'images/month1/IMG_3113.JPG', caption: 'Drinks' },
            { src: 'images/month1/IMG_1888.jpeg', caption: 'Fish Pics' },
        ]
      },
      {
        label: 'Month 2',
        range: 'June ‚Üí July 2025',
        images: [
          { src: 'images/month2/IMG_2487.jpeg', caption: 'Austin Nights' },
          { src: 'images/month2/IMG_2700.JPG', caption: 'Barton Springs' },
          { src: 'images/month2/IMG_3179.JPG', caption: 'Sushi Night' },
          { src: 'images/month2/IMG_3209.JPG', caption: 'Jewboys with your boy' },
          { src: 'images/month2/IMG_7582.jpeg', caption: 'Austin Strolls' },
          { src: 'images/month2/DSC01417.JPG', caption: 'Late Night Food' },
          { src: 'images/month2/IMG_7722.jpeg', caption: 'Cow Cuddling' },
          { src: 'images/month2/IMG_0248.JPG', caption: 'AT&T Center' },
          { src: 'images/month2/IMG_3189.JPG', caption: 'Kisses' },
          { src: 'images/month2/IMG_2460.jpeg', caption: 'Hikes' },
          { src: 'images/month2/IMG_2438.jpeg', caption: 'Brunch' },
        ]
      },
      {
        label: 'Month 3',
        range: 'July ‚Üí Aug 2025',
        images: [
          { src: 'images/month3/DSC01992.JPG', caption: 'Comfort Person' },
          { src: 'images/month3/IMG_1019.jpg', caption: 'Princess Treatment' },
          { src: 'images/month3/IMG_2969.jpeg', caption: 'Beach day üèñÔ∏è' },
          { src: 'images/month3/IMG_3067.jpeg', caption: 'Beach Sunsets' },
          { src: 'images/month3/IMG_3076.jpeg', caption: 'Walks on the beach' },
          { src: 'images/month3/IMG_3578.jpeg', caption: 'The MET Rooftop' },
          { src: 'images/month3/DSC01914.JPG', caption: 'Sabahs Crib' },
          { src: 'images/month3/IMG_2935.jpeg', caption: 'AC Bathroom' },
          { src: 'images/month3/IMG_3047.jpeg', caption: 'Candy Shop' },
          { src: 'images/month3/IMG_5561.jpeg', caption: 'The Clurb' },
          { src: 'images/month3/IMG_9652.JPG', caption: 'AC Clurb' },
        ]
      }
    ];

    // --- Derived stats ---
    const today = new Date();
    const dayMs = 24 * 60 * 60 * 1000;
    const totalDays = Math.max(1, Math.round((today - ANNIVERSARY_START) / dayMs));
    document.getElementById('dayCount').textContent = totalDays.toLocaleString();

    // use pretty dates
    document.getElementById('startDateLabel').textContent = formatPrettyDate(ANNIVERSARY_START);
    document.getElementById('endDateLabel').textContent = formatPrettyDate(today);

    // show months badge if appropriate
    maybeShowMonthsBadge(totalDays);

    // --- Build timeline ---
    const timeline = document.getElementById('timeline');
    months.forEach((m, idx) => {
      const b = document.createElement('button');
      b.className = 'pill' + (idx===0?' active':'');
      b.textContent = `${m.label} ¬∑ ${m.range}`;
      b.addEventListener('click', () => {
        document.querySelectorAll('.pill').forEach(x => x.classList.remove('active'));
        b.classList.add('active');
        document.getElementById(`month-${idx}`).scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
      timeline.appendChild(b);
    });

    // --- Build sections & gallery cards ---
    const content = document.getElementById('content');
    const sizes = ['span-4','span-3','span-6','span-3','span-4','span-3','span-3','span-6'];

    months.forEach((m, idx) => {
      const sec = document.createElement('section');
      sec.id = `month-${idx}`;
      const head = document.createElement('div'); head.className = 'section-head';
      head.innerHTML = `<h2>${m.label} <span style="color:var(--muted);font-weight:400">(${m.range})</span></h2>` +
                       `<div class="count">${m.images.length} photos</div>`;
      const grid = document.createElement('div'); grid.className = 'grid';
      m.images.forEach((img, i) => {
        const card = document.createElement('figure');
        card.className = `card ${sizes[i % sizes.length]}`;
        card.innerHTML = `<img loading="lazy" src="${img.src}" alt=""/><small>${img.caption || ''}</small>`;
        card.addEventListener('click', () => openLightbox(idx, i));
        grid.appendChild(card);
      });
      sec.appendChild(head); sec.appendChild(grid); content.appendChild(sec);
    });

    // Scroll helper
    document.getElementById('scrollToGallery').addEventListener('click', () => {
      document.getElementById('month-0').scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    // Shuffle
    document.getElementById('shuffle').addEventListener('click', () => {
      // Flatten all images, shuffle in-place, rebuild first section as a mega-mix
      const all = months.flatMap((m, mi) => m.images.map((im, ii) => ({ ...im, _mi: mi, _ii: ii })));
      for (let i = all.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [all[i], all[j]] = [all[j], all[i]]; }
      const first = document.getElementById('month-0');
      first.querySelector('.section-head h2').innerHTML = `Greatest Hits <span style="color:var(--muted);font-weight:400">(all months)</span>`;
      const grid = first.querySelector('.grid'); grid.innerHTML = '';
      all.slice(0, Math.min(24, all.length)).forEach((img, i) => {
        const card = document.createElement('figure');
        card.className = `card ${sizes[i % sizes.length]}`;
        card.innerHTML = `<img loading="lazy" src="${img.src}" alt=""/><small>${img.caption || ''}</small>`;
        card.addEventListener('click', () => openLightbox(img._mi, img._ii));
        grid.appendChild(card);
      });
      // activate first pill
      document.querySelectorAll('.pill').forEach(x => x.classList.remove('active'));
      document.querySelectorAll('.pill')[0].classList.add('active');
      first.scrollIntoView({ behavior: 'smooth' });
      burstConfetti();
    });

    // Lightbox logic
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbCaption = document.getElementById('lbCaption');
    const prev = document.getElementById('prev');
    const next = document.getElementById('next');
    const closeBtn = document.getElementById('close');
    const togglePlay = document.getElementById('togglePlay');
    const playAll = document.getElementById('playAll');

    let curMonth = 0, curIndex = 0, timer = null, playing = false;

    function openLightbox(mi, ii) {
      curMonth = mi; curIndex = ii; updateLightbox();
      lb.classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    function updateLightbox() {
      const item = months[curMonth].images[curIndex];
      lbImg.src = item.src; lbCaption.textContent = `${months[curMonth].label} ¬∑ ${item.caption || ''}`;
    }
    function step(dir = 1) {
      const arr = months[curMonth].images;
      curIndex = (curIndex + dir + arr.length) % arr.length;
      updateLightbox();
    }
    function setPlaying(p) {
      playing = p;
      togglePlay.textContent = p ? '‚è∏' : '‚ñ∂Ô∏é';
      playAll.textContent = p ? '‚è∏ Pause slideshow' : '‚ñ∂Ô∏é Play slideshow';
      if (timer) { clearInterval(timer); timer = null; }
      if (p) { timer = setInterval(() => step(+1), 2400); }
    }

    prev.addEventListener('click', () => step(-1));
    next.addEventListener('click', () => step(+1));
    togglePlay.addEventListener('click', () => setPlaying(!playing));
    playAll.addEventListener('click', () => { openLightbox(0,0); setPlaying(!playing); });
    closeBtn.addEventListener('click', () => { lb.classList.remove('open'); setPlaying(false); document.body.style.overflow = ''; });
    window.addEventListener('keydown', (e) => {
      if (!lb.classList.contains('open')) return;
      if (e.key === 'Escape') closeBtn.click();
      if (e.key === 'ArrowRight') step(+1);
      if (e.key === 'ArrowLeft') step(-1);
      if (e.key.toLowerCase() === ' ') { e.preventDefault(); setPlaying(!playing); }
    });

    // Tiny confetti burst
    const confetti = document.getElementById('confetti');
    const ctx = confetti.getContext('2d');
    let confettiBits = [];
    function resizeCanvas(){ confetti.width = innerWidth; confetti.height = innerHeight; }
    addEventListener('resize', resizeCanvas); resizeCanvas();
    function burstConfetti() {
      for (let i=0;i<80;i++) {
        confettiBits.push({
          x: innerWidth/2, y: 80, r: 2+Math.random()*4, vx: -2+Math.random()*4, vy: -6-Math.random()*4,
          a: 1, c: Math.random()<.5? '#ff6b9a':'#5ee0ff'
        });
      }
    }
    function tickConfetti() {
      ctx.clearRect(0,0,confetti.width, confetti.height);
      confettiBits.forEach(p => {
        p.x += p.vx; p.y += p.vy; p.vy += .15; p.a -= .01;
        ctx.globalAlpha = Math.max(0, p.a); ctx.fillStyle = p.c;
        ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
      });
      confettiBits = confettiBits.filter(p => p.a>0 && p.y < innerHeight+20);
      requestAnimationFrame(tickConfetti);
    }
    tickConfetti();
    // Celebrate on load
    setTimeout(burstConfetti, 600);

    // Music toggle
    const musicBtn = document.getElementById('musicBtn'); const bgm = document.getElementById('bgm');
    musicBtn.addEventListener('click', async () => {
      if (bgm.paused) { try { await bgm.play(); musicBtn.textContent = '‚ô™ Music: On'; } catch(e) { alert('Place a song at assets/music.mp3 to enable.'); } }
      else { bgm.pause(); musicBtn.textContent = '‚ô™ Music: Off'; }
    });
  </script>
</body>
</html>
